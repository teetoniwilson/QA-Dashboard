<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
	  
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.14.1/bootstrap-table.min.js">
    
    <link rel="stylesheet" href="https://rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/css/bootstrap-editable.css">
    <link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet"/>
	<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
	

    <title>SB-QA-Dashboard</title>
  </head>
  <body>
	  <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light padder">
		  <a class="navbar-brand" href="/">Home</a>
		  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		  </button>

		  <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
			<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
			  <li class="nav-item">
				<a class="nav-link" href="/issuelogs/index">Issue logs <span class="sr-only">(current)</span></a>
			  </li>
			  <li class="nav-item">
				<a class="nav-link" href="/lessonlearnedlogs/index">Lesson learned logs</a>
			  </li>
			  <li class="nav-item">
				<a class="nav-link" href="/testcases/index">Test Cases</a>
			  </li>
				<li class="nav-item">
				<a class="nav-link" href="/count">Count</a>
			  </li>
				<li class="nav-item">
				<a class="nav-link" href="/performance">Performance</a>
			  </li>			  
			   <li class="nav-item">
					<a class="nav-link" href="/iftree">Tree</a>
				</li>
			</ul>
			<form class="form-inline my-2 my-lg-0" action="/issuelogs/index" method="GET">
			  <input class="form-control mr-sm-2" name="search" type="text" placeholder="Search">
			  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
			</form>
			  <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
				  <%if(!currentUser){%>
				  	<li class="nav-item">
					<a class="nav-link" href="/login">Login</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" href="/register">Sign Up</a>
				  </li>
				  <%} else {%>	
				  <li class="nav-item">
					<a class="nav-link" href="/users/<%= currentUser._id %>">Signed in as  <%=currentUser.firstName %></a>
				  </li>	
				  <li class="nav-item">
					<a class="nav-link" href="/logout">Logout</a>
				  </li>	
				  <%}%>
			</ul>
		  </div>
	</nav>  
	  
	  
	  <div class="container">
		  <%if(error && error.length>0){%>
		    <div class="alert alert-danger" role="alert">
 		 		<%=error %>
	       </div>
		 <% } %>
			<%if(success && success.length>0){%>
		      <div class="alert alert-success" role="alert">
 		 		<%=success %>
	        </div>
		    <% } %>
	 </div>
	  
	  <% if(currentUser && currentUser.isAdmin) { %>
	  		<h1>You're an Admin</h1>
			<% }%>
	  
<div class="container">
	


<!-- Create Testcases Modal -->
<div class="modal fade" id="newTestCaseModal" tabindex="-1" role="dialog" aria-labelledby="testCaseModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <form action ="/testcases" method="POST">
	  <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="testCaseModalLabel">New Test Case</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
	  
      <div class="modal-body">
    	
			<div class = "form-group row">
				<div class="form-group col-md-2">
              		<label for="sprint">Sprint</label>
             		 <input type="number" min="1" class="form-control" id="sprint" name="sprint" required>
            	</div>
				<div class="col-md-4">
                	<label for="section">App Section</label>
                	<input type="text" class="form-control" placeholder="App Section" name ="section" required maxlength="30">          
            	</div>	
			</div>
			<div class="form-group row">
					<div class="form-group col-md-12">
						<label for="testscenario">Test Scenario</label>
               			<textarea class="form-control" id="testscenario" rows="3" name="testscenario"></textarea>        	
					</div>
            </div>
			<div class ="form-group row">
				<div class="form-group col-md-3">
					 <label for="status">Status</label>
					 <select id="status" class="form-control" name="status">
						   <option>Passed</option>
						   <option>Failed</option>
						   <option selected>Not Run</option>
					 </select>
            	</div> 
				<div class="form-group col-md-9">
						<label for="comment">comment</label>
               			<textarea class="form-control" id="comment" rows="2" name="comment"></textarea>        	
				</div>
			</div>
		  
      </div>
		
      <div class="modal-footer">
		  <div class="form-group">			  
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			<button type="submit" class="btn btn-primary" name="submit">Save changes</button>
		</div>
      </div>
    </div>
  </form>
  </div>
</div>
	
	
	
	
	<!-- Edit Testcases Modal -->
<div class="modal fade" id="EditTestCaseModal" tabindex="-1" role="dialog" aria-labelledby="testCaseModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <form action ="" method="POST" id="updateModalForm">
	  <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="EditTestCaseModalLabel">Edit Test Case - <span id="textcaseIdNum"></span></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
	  
      <div class="modal-body">
    	
			<div class = "form-group row">
				<div class="form-group col-md-2">
              		<label for="sprint">Sprint</label>
             		 <input type="number" min="1" class="form-control" id="editSprint" name="editSprint" required>
            	</div>
				<div class="col-md-4">
                	<label for="section">App Section</label>
                	<input type="text" class="form-control" placeholder="App Section" id="editSection" name ="editSection" required maxlength="30">          
            	</div>	
			</div>
			<div class="form-group row">
					<div class="form-group col-md-12">
						<label for="testscenario">Test Scenario</label>
               			<textarea class="form-control" id="editTestscenario" rows="3" name="editTestscenario"></textarea>        	
					</div>
            </div>
			<div class ="form-group row">
				<div class="form-group col-md-3">
					 <label for="status">Status</label>
					 <select id="editStatus" class="form-control" name="editStatus">
						   <option>Passed</option>
						   <option>Failed</option>
						   <option selected>Not Run</option>
					 </select>
            	</div> 
				<div class="form-group col-md-9">
						<label for="comment">comment</label>
               			<textarea class="form-control" id="editComment" rows="2" name="editComment"></textarea>        	
				</div>
			</div>
		  
      </div>
		
      <div class="modal-footer">
		  <div class="form-group">			  
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			<button type="submit" class="btn btn-primary" name="submit">Save changes</button>
		</div>
      </div>
    </div>
</form>
  </div>
</div>	
	
	
 

<div class="container mt-2 mb-2">
			 <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newTestCaseModal" name="addNew" id="addNew">
  Add New Test case
</button>
	
	<table class="table"
             data-toggle="table"
             data-pagination="true"
             data-search="true"
             data-search-align="right"
             data-show-columns="true"
             data-show-toggle="true"
             data-show-refresh="true"
             data-show-fullscreen="true"
             data-show-pagination-switch="true"
             data-pagination-pre-text="Previous"
             data-show-pagination-next="Next"
		     data-pagination-h-align="left"
             data-pagination-detail-h-align="right"
		   	 data-page-size="50"
             data-page-list="[50, 70, 100, All]"
             data-url="assets/data.json">
             
             <thead>
                 <tr>
                     <th rowspan="2" data-checkbox="true" data-valign="bottom"></th>
                     <th colspan="7" data-align="center">Test Cases </th>
                 </tr>
                 <tr>
                     <th data-field="testcaseId" data-sortable="true" data-switchable="false">ID</th>
					 <th data-field="sprint" data-sortable="true" data-switchable="false">Sprint</th>
                     <th data-field="section" data-sortable="true" data-switchable="false">Section</th>
                     <th data-field="testscenario" data-sortable="true">Scenario</th>
                     <th data-field="status" data-sortable="true">Status</th>
					 <th data-field="action" data-formatter="actionFormatter">Action</th>
					
                 </tr>
             </thead>
		     <% testcase.forEach(function(testcase){%>
			<tr>
				<td></td>
				<td><%=testcase.testcaseId%></td>
				<td><%=testcase.sprint%></td>
				<td><%=testcase.section%></td>				
				<td><%=testcase.testscenario%></td>				
				<td <%if(testcase.status =="Passed"){%>
					class="statusPassed";

					<%} else {%>	
					<%if(testcase.status =="Failed"){%>
					class="statusFailed";
					<%}%>
					<%}%>
					
				><%=testcase.status%></td>				
			</tr>			
		<%});%>

        </table>
	

</div>
	
</div>	  

	  	
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.0/bootstrap-table.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/editable/bootstrap-table-editable.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/export/bootstrap-table-export.js"></script>
		<script src="https://rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.9.1/extensions/filter-control/bootstrap-table-filter-control.js">         	</script>
	    
	    <script src="/testcase/index.js"></script>
	    <script src="/testcase/update.js"></script>
	  
	  
	   <script>	
		   window.onload = function(err){	
			   
		   					if(<%-JSON.stringify(currentUser)%> == null)
							   {
							   		 var elems = document.getElementsByClassName("fas");		   
						   				
									for (var i=0;i<elems.length;i+=1){
									  elems[i].style.display = "none";
									}  
								   document.getElementById("addNew").style.display = "none";
							};
							   }
	  </script>
	  
		
	  

	<%- include("../partials/footer") %>
